<template>
    <div class="task" key={task.Id}>
        <div class="task-header">
            <h2>{task.Name}</h2>
            <div class="task-icon">
                <lightning-icon size="x-small" icon-name="utility:success" title="Mark Task As Complete"
                                alternative-text="Mark Completed" onclick={handleComplete}
                                if:true={isCompletable}></lightning-icon>
                <lightning-icon size="x-small" icon-name="utility:edit" title="Edit Task" alternative-text="Edit" onclick={handleEdit}
                                if:true={isEditable}></lightning-icon>
                <lightning-icon size="x-small" icon-name="utility:delete" title="Delete Task" alternative-text="Delete"
                                onclick={handleDelete}></lightning-icon>
            </div>
        </div>
        <div class="task-description">
            <template if:false={isEditing}>
                <p>{task.Description__c}</p>
            </template>
            <template if:true={isEditing}>
                <lightning-input type="text" label="Name" value={task.Name}
                                 onchange={handleNameChange}></lightning-input>
                <lightning-textarea label="Description" value={task.Description__c}
                                    onchange={handleDescriptionChange}></lightning-textarea>
                <lightning-input type="date" label="Due Date" value={task.Due_Date__c}
                                 onchange={handleDueDateChange}></lightning-input>
                <div class="task-edit-buttons">
                    <lightning-button label="Save" variant="brand" onclick={handleSave}></lightning-button>
                    <lightning-button label="Cancel" variant="neutral" onclick={handleCancel}></lightning-button>
                </div>
            </template>
        </div>
        <div class="task-footer">
            <p class="task-due">{task.Due_Date__c}</p>
        </div>
    </div>
</template>